# Define the animation function

Now, we need to define the function that will update the plot for each frame of the animation. This function will take the data generated by the `data_gen()` function and update the plot with the new data. We will also update the x-axis limits as the animation progresses.

```python
def run(data):
    # update the data
    t, y = data
    xdata.append(t)
    ydata.append(y)
    xmin, xmax = ax.get_xlim()

    if t >= xmax:
        ax.set_xlim(xmin, 2*xmax)
        ax.figure.canvas.draw()
    line.set_data(xdata, ydata)

    return line,
```
