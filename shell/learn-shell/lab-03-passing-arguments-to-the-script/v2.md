# Passing Arguments to the Script

## Introduction

In Shell programming, the ability to pass arguments to a script is a fundamental and powerful feature. It allows scripts to be more flexible and reusable by accepting input from the command line. This lab will guide you through the process of creating a Shell script that can accept and use command-line arguments. You will learn how to access these arguments within your script, handle multiple arguments, and use special variables to process them efficiently.

## Steps

### Step 1: Create a new script file

Let's start by creating a new script file. We'll use the WebIDE (VS Code) for this lab.

1. Open the WebIDE if it's not already open.
2. In the file explorer on the left, navigate to the `/home/labex/project` directory.
3. Right-click in the file explorer and select "New File".
4. Name the new file `arguments.sh`.

Now that we have created the file, let's add the basic structure of our script:

```bash
#!/bin/bash

# Your code will go here
```

The first line is called the "shebang" or "hashbang". It tells the system which interpreter to use to execute the script. In this case, we're using bash. The `#!` at the beginning is special and tells the system that this is the interpreter line.

For beginners: The shebang line is important because it allows you to run the script directly (like `./arguments.sh`) instead of having to type `bash arguments.sh` every time. It's a small detail, but it makes your scripts more convenient to use.

#### Verification

```yaml
- name: Verify Existence of arguments.sh File
  script: |
    #!/bin/bash
    if [ -f /home/labex/project/arguments.sh ]; then
      exit 0
    else
      exit 1
    fi
  hint: |
    Make sure you have created the file 'arguments.sh' in the '/home/labex/project' directory. If you're having trouble, try these steps:
    1. In the WebIDE, look for the file explorer on the left side.
    2. Find the '/home/labex/project' folder and click on it.
    3. Right-click in the empty space and select 'New File'.
    4. Type 'arguments.sh' and press Enter.
```

### Step 2: Access script arguments

Now, let's modify our script to access and display the arguments passed to it. In Shell scripting, special variables are used to access command-line arguments:

- `$0` represents the name of the script itself
- `$1`, `$2`, `$3`, etc., represent the first, second, third arguments, and so on

Add the following code to your `arguments.sh` file:

```bash
#!/bin/bash

echo "Script name: $0"
echo "First argument: $1"
echo "Second argument: $2"
echo "Third argument: $3"
```

This script will display the script name and the first three arguments passed to it.

For beginners:

- The `$` symbol is used to reference variables in bash.
- `$0`, `$1`, `$2`, etc., are special variables that bash automatically sets for you when you run a script with arguments.
- If you run the script without any arguments, `$1`, `$2`, and `$3` will be empty, but the script will still run without errors.

#### Verification

```yaml
- name: Verify Script Content
  script: |
    #!/bin/bash
    if grep -q "echo.*Script name.*\$0" /home/labex/project/arguments.sh &&
       grep -q "echo.*First argument.*\$1" /home/labex/project/arguments.sh &&
       grep -q "echo.*Second argument.*\$2" /home/labex/project/arguments.sh &&
       grep -q "echo.*Third argument.*\$3" /home/labex/project/arguments.sh; then
      exit 0
    else
      exit 1
    fi
  hint: |
    Make sure you've added the correct echo statements to display the script name and the first three arguments in your 'arguments.sh' file. Here's what your file should look like:

    #!/bin/bash
    echo "Script name: $0"
    echo "First argument: $1"
    echo "Second argument: $2"
    echo "Third argument: $3"

    If you're having trouble, try copying and pasting this code into your file.
```

### Step 3: Make the script executable

Before we can run our script, we need to make it executable. This is done using the `chmod` command. In the terminal, navigate to the project directory and run the following command:

```bash
cd /home/labex/project
chmod +x arguments.sh
```

The `chmod +x` command adds execute permissions to the file, allowing it to be run as a script.

For beginners:

- `chmod` stands for "change mode". It's used to change the permissions of a file or directory.
- The `+x` option adds the execute permission. This is necessary for bash to be able to run the file as a script.
- If you forget this step, you'll get a "permission denied" error when trying to run your script.

#### Verification

```yaml
- name: Verify Script Permissions
  script: |
    #!/bin/bash
    if [ -x /home/labex/project/arguments.sh ]; then
      exit 0
    else
      exit 1
    fi
  hint: |
    Make sure you've made the 'arguments.sh' file executable using the chmod command. Here are the steps:
    1. Open a terminal in the WebIDE.
    2. Type 'cd /home/labex/project' and press Enter to navigate to the correct directory.
    3. Type 'chmod +x arguments.sh' and press Enter.
    4. If you don't see any output, that's okay! It means the command worked.
```

### Step 4: Execute the script with arguments

Now that our script is executable, let's run it with some arguments. In the terminal, execute the following command:

```bash
./arguments.sh hello world example
```

You should see output similar to this:

```
Script name: ./arguments.sh
First argument: hello
Second argument: world
Third argument: example
```

This output shows that our script successfully accessed and displayed the command-line arguments.

For beginners:

- The `./` before the script name tells bash to look for the script in the current directory.
- Each word after the script name becomes a separate argument. In this case, "hello" is the first argument, "world" is the second, and "example" is the third.
- If you want to pass an argument with spaces, you need to use quotes, like this: `./arguments.sh "hello world" example`

#### Verification

```yaml
- name: Verify Script Execution
  script: |
    #!/bin/bash
    output=$(./arguments.sh hello world example)
    if echo "$output" | grep -q "Script name.*arguments.sh" &&
       echo "$output" | grep -q "First argument.*hello" &&
       echo "$output" | grep -q "Second argument.*world" &&
       echo "$output" | grep -q "Third argument.*example"; then
      exit 0
    else
      exit 1
    fi
  hint: |
    Make sure you've executed the script with the arguments 'hello', 'world', and 'example'. Here's what to do:
    1. In the terminal, make sure you're in the /home/labex/project directory.
    2. Type './arguments.sh hello world example' and press Enter.
    3. Check that the output matches what's expected. If it doesn't, double-check your script content and try running it again.
```

### Step 5: Handle the number of arguments

Let's modify our script to handle different numbers of arguments. We'll use the `$#` special variable, which holds the number of arguments passed to the script.

Update your `arguments.sh` file with the following content:

```bash
#!/bin/bash

if [ $# -eq 0 ]; then
  echo "No arguments provided."
elif [ $# -eq 1 ]; then
  echo "One argument provided: $1"
elif [ $# -eq 2 ]; then
  echo "Two arguments provided: $1 and $2"
else
  echo "More than two arguments provided:"
  echo "First argument: $1"
  echo "Second argument: $2"
  echo "Third argument: $3"
  echo "Total number of arguments: $#"
fi
```

This script uses conditional statements to handle different numbers of arguments.

For beginners:

- `$#` is a special variable that contains the number of arguments passed to the script.
- `[ $# -eq 0 ]` is a condition that checks if the number of arguments is equal to 0.
- `elif` is short for "else if". It allows you to check multiple conditions in sequence.
- The `-eq` operator means "equal to". There are other operators like `-lt` (less than), `-gt` (greater than), etc.

#### Verification

```yaml
- name: Verify Updated Script Content
  script: |
    #!/bin/bash
    if grep -q "\[ \$# -eq 0 \]" /home/labex/project/arguments.sh &&
       grep -q "\[ \$# -eq 1 \]" /home/labex/project/arguments.sh &&
       grep -q "\[ \$# -eq 2 \]" /home/labex/project/arguments.sh &&
       grep -q "Total number of arguments: \$#" /home/labex/project/arguments.sh; then
      exit 0
    else
      exit 1
    fi
  hint: |
    Make sure you've updated the 'arguments.sh' file with the new content that handles different numbers of arguments. If you're having trouble, try these steps:
    1. Open the 'arguments.sh' file in the WebIDE.
    2. Replace all the existing content with the new script provided in Step 5.
    3. Save the file (you can use Ctrl+S or Cmd+S).
    4. If you're still seeing an error, double-check that you've copied the entire script, including the #!/bin/bash line at the top.
```

### Step 6: Test the updated script

Now, let's test our updated script with different numbers of arguments:

```bash
./arguments.sh
./arguments.sh one
./arguments.sh one two
./arguments.sh one two three four
```

You should see different outputs based on the number of arguments provided.

For beginners:

- Running the script without any arguments (`./arguments.sh`) will trigger the first condition in our script.
- Each subsequent command adds more arguments, demonstrating how our script handles different cases.
- Notice how the script's behavior changes based on the number of arguments. This kind of flexibility is very useful in real-world scripts.

#### Verification

```yaml
- name: Verify Script Execution with Different Argument Counts
  script: |
    #!/bin/bash
    no_args=$(./arguments.sh)
    one_arg=$(./arguments.sh one)
    two_args=$(./arguments.sh one two)
    many_args=$(./arguments.sh one two three four)

    if echo "$no_args" | grep -q "No arguments provided" &&
       echo "$one_arg" | grep -q "One argument provided: one" &&
       echo "$two_args" | grep -q "Two arguments provided: one and two" &&
       echo "$many_args" | grep -q "More than two arguments provided" &&
       echo "$many_args" | grep -q "Total number of arguments: 4"; then
      exit 0
    else
      exit 1
    fi
  hint: |
    Make sure you've executed the script with different numbers of arguments. Try running these commands one by one:
    1. ./arguments.sh
    2. ./arguments.sh one
    3. ./arguments.sh one two
    4. ./arguments.sh one two three four
    Check that the output for each command matches what you expect based on the script we wrote.
```

### Step 7: Loop through all arguments

Finally, let's modify our script to loop through all provided arguments using the `$@` special variable, which represents all command-line arguments.

Update your `arguments.sh` file with the following content:

```bash
#!/bin/bash

echo "Total number of arguments: $#"
echo "All arguments:"

count=1
for arg in "$@"; do
  echo "Argument $count: $arg"
  count=$((count + 1))
done
```

This script uses a `for` loop to iterate through all arguments and display them with their position.

For beginners:

- `$@` is a special variable that contains all the arguments passed to the script.
- The `for` loop is used to iterate over a list of items. In this case, it's iterating over all the arguments.
- `$((count + 1))` is arithmetic expansion in bash. It's used to increment the count variable.
- This script will work with any number of arguments, making it more flexible than our previous versions.

#### Verification

```yaml
- name: Verify Final Script Content
  script: |
    #!/bin/bash
    if grep -q "echo.*Total number of arguments: \$#" /home/labex/project/arguments.sh &&
       grep -q "for arg in \"\$@\"" /home/labex/project/arguments.sh &&
       grep -q "echo.*Argument \$count: \$arg" /home/labex/project/arguments.sh; then
      exit 0
    else
      exit 1
    fi
  hint: |
    Make sure you've updated the 'arguments.sh' file with the new content that loops through all arguments. Here's what to check:
    1. Open the 'arguments.sh' file in the WebIDE.
    2. Ensure it contains the line 'echo "Total number of arguments: $#"'
    3. Check for the line 'for arg in "$@"'
    4. Look for 'echo "Argument $count: $arg"' inside the loop
    If any of these are missing, try copying the entire script from Step 7 and replacing the contents of your file.
```

### Step 8: Test the final script

Let's test our final script with multiple arguments:

```bash
./arguments.sh apple banana cherry date
```

You should see output similar to this:

```
Total number of arguments: 4
All arguments:
Argument 1: apple
Argument 2: banana
Argument 3: cherry
Argument 4: date
```

This demonstrates that our script can now handle any number of arguments and display them all.

For beginners:

- This final version of the script is much more flexible than our earlier versions.
- It can handle any number of arguments, from zero to many.
- The script now numbers each argument, which can be very useful in more complex scripts.
- Try running the script with different numbers of arguments to see how it behaves.

#### Verification

```yaml
- name: Verify Final Script Execution
  script: |
    #!/bin/bash
    output=$(./arguments.sh apple banana cherry date)
    if echo "$output" | grep -q "Total number of arguments: 4" &&
       echo "$output" | grep -q "Argument 1: apple" &&
       echo "$output" | grep -q "Argument 2: banana" &&
       echo "$output" | grep -q "Argument 3: cherry" &&
       echo "$output" | grep -q "Argument 4: date"; then
      exit 0
    else
      exit 1
    fi
  hint: |
    If you're seeing an error, try these steps:
    1. Make sure you're in the correct directory (/home/labex/project) in the terminal.
    2. Run the command: ./arguments.sh apple banana cherry date
    3. Check that the output shows all four arguments (apple, banana, cherry, date) with their correct numbers.
    4. If the output doesn't match, double-check your script content and try running it again.
```

## Summary

In this lab, you have learned how to create a Shell script that can accept and process command-line arguments. You've explored several key concepts:

1. Creating and making a script executable
2. Accessing individual arguments using special variables ($1, $2, etc.)
3. Using the $# variable to determine the number of arguments
4. Implementing conditional logic to handle different numbers of arguments
5. Using the $@ variable to loop through all provided arguments

These skills are fundamental in Shell scripting and will allow you to create more flexible and powerful scripts that can adapt to different inputs. As you continue to develop your Shell scripting skills, you'll find that the ability to handle command-line arguments is crucial for creating versatile and reusable scripts for various tasks in
