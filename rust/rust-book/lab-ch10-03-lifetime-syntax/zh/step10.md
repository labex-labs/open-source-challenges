# 方法定义中的生命周期标注

当我们为带有生命周期的结构体实现方法时，我们使用与清单 10-11 中展示的泛型类型参数相同的语法。我们声明和使用生命周期参数的位置取决于它们是与结构体字段相关，还是与方法参数及返回值相关。

结构体字段的生命周期名称总是需要在 `impl` 关键字之后声明，然后在结构体名称之后使用，因为这些生命周期是结构体类型的一部分。

在 `impl` 块内部的方法签名中，引用可能与结构体字段中的引用的生命周期相关联，也可能是独立的。此外，生命周期省略规则常常使得在方法签名中不需要生命周期标注。让我们使用我们在清单 10-24 中定义的名为 `ImportantExcerpt` 的结构体来看一些示例。

首先，我们将使用一个名为 `level` 的方法，它唯一的参数是对 `self` 的引用，并且它的返回值是一个 `i32`，而不是对任何东西的引用：

```rust
impl<'a> ImportantExcerpt<'a> {
    fn level(&self) -> i32 {
        3
    }
}
```

在 `impl` 之后的生命周期参数声明以及在类型名称之后对它的使用是必需的，但是由于第一个省略规则，我们不需要注释对 `self` 的引用的生命周期。

这里有一个第三个生命周期省略规则适用的示例：

```rust
impl<'a> ImportantExcerpt<'a> {
    fn announce_and_return_part(&self, announcement: &str) -> &str {
        println!("Attention please: {announcement}");
        self.part
    }
}
```

有两个输入生命周期，所以 Rust 应用第一个生命周期省略规则，给 `&self` 和 `announcement` 都赋予它们自己的生命周期。然后，因为其中一个参数是 `&self`，返回类型获得 `&self` 的生命周期，并且所有生命周期都已得到解释。
