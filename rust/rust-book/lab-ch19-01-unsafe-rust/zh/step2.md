# 不安全的强大功能

要切换到不安全的 Rust，使用 `unsafe` 关键字，然后开始一个新的块来包含不安全代码。在不安全的 Rust 中，你可以执行五项在安全的 Rust 中无法执行的操作，我们称之为*不安全的强大功能*。这些强大功能包括能够：

1.  解引用裸指针
2.  调用不安全的函数或方法
3.  访问或修改可变静态变量
4.  实现不安全的 trait
5.  访问 `union` 的字段

需要理解的是，`unsafe` 并不会关闭借用检查器或禁用 Rust 的任何其他安全检查：如果你在不安全代码中使用引用，它仍然会被检查。`unsafe` 关键字只是让你能够使用这五项功能，然后编译器不会对其进行内存安全检查。在不安全块内部，你仍然会获得一定程度的安全性。

此外，`unsafe` 并不意味着块内的代码必然危险或肯定会有内存安全问题：其意图是作为程序员，你要确保不安全块内的代码将以有效的方式访问内存。

人都会犯错，错误难免会发生，但是通过要求这五项不安全操作必须在使用 `unsafe` 注释的块内，你就会知道任何与内存安全相关的错误肯定在一个 `unsafe` 块内。保持 `unsafe` 块短小；稍后当你调查内存错误时，你会为此感激自己。

为了尽可能隔离不安全代码，最好将此类代码封装在一个安全抽象中并提供一个安全的 API，我们将在本章后面研究不安全函数和方法时进行讨论。标准库的某些部分是通过对经过审核的不安全代码进行安全抽象来实现的。将不安全代码包装在安全抽象中可以防止 `unsafe` 的使用泄露到你或你的用户可能想要使用由不安全代码实现的功能的所有地方，因为使用安全抽象是安全的。

让我们依次看看这五项不安全的强大功能。我们还将研究一些为不安全代码提供安全接口的抽象。
