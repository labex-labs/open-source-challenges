# 惊慌与否

那么，你如何决定何时应该调用 `panic!`，何时应该返回 `Result` 呢？当代码发生恐慌时，就无法恢复了。对于任何错误情况，无论是否有可能恢复，你都可以调用 `panic!`，但这样你就是在替调用代码决定某个情况是无法恢复的。当你选择返回一个 `Result` 值时，你给了调用代码一些选择。调用代码可以选择以适合其情况的方式尝试恢复，或者它可以决定在这种情况下 `Err` 值是无法恢复的，所以它可以调用 `panic!`，把你这个可恢复的错误变成一个不可恢复的错误。因此，当你定义一个可能失败的函数时，返回 `Result` 是一个很好的默认选择。

在示例、原型代码和测试等情况下，编写会发生恐慌的代码而不是返回 `Result` 更合适。让我们来探讨一下原因，然后讨论一些编译器无法判断失败不可能发生，但作为人类你可以判断的情况。本章将以一些关于如何决定在库代码中是否要发生恐慌的一般准则作为结尾。
