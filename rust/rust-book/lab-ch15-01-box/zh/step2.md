# 使用 `Box<T>` 在堆上存储数据

在讨论 `Box<T>` 的堆存储用例之前，我们先来介绍一下语法以及如何与存储在 `Box<T>` 中的值进行交互。

清单 15-1 展示了如何使用盒指针在堆上存储一个 `i32` 值。

文件名：`src/main.rs`

```rust
fn main() {
    let b = Box::new(5);
    println!("b = {b}");
}
```

清单 15-1：使用盒指针在堆上存储一个 `i32` 值

我们定义变量 `b`，其值为一个指向堆上分配的 `5` 的 `Box`。这个程序会打印 `b = 5`；在这种情况下，我们可以像访问栈上的数据一样访问盒指针中的数据。就像任何拥有所有权的值一样，当盒指针超出作用域时，就像 `b` 在 `main` 函数结束时那样，它会被释放。释放操作会同时作用于盒指针（存储在栈上）及其指向的数据（存储在堆上）。

将单个值存储在堆上并不是很有用，所以你不会经常以这种方式单独使用盒指针。在大多数情况下，将像单个 `i32` 这样的值存储在默认的栈上会更合适。让我们来看一个例子，在这个例子中，如果没有盒指针，我们将无法定义某些类型，而盒指针使我们能够定义这些类型。
