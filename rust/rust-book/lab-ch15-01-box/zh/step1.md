# 使用 `Box<T>` 指向堆上的数据

最直接的智能指针是「盒指针」，其类型写作 `Box<T>`。盒指针允许你将数据存储在堆上而非栈上。留在栈上的是指向堆数据的指针。请参考第 4 章回顾栈和堆的区别。

除了将数据存储在堆上而非栈上之外，盒指针没有性能开销。但它们也没有太多额外的功能。你最常在以下几种情况中使用它们：

- 当你有一个在编译时大小未知的类型，并且你想在需要确切大小的上下文中使用该类型的值时
- 当你有大量数据，并且你想转移所有权，但确保在转移时数据不会被复制时
- 当你想拥有一个值，并且你只关心它是实现特定 trait 的类型，而不是特定的类型时

我们将在「使用盒指针实现递归类型」中演示第一种情况。在第二种情况下，转移大量数据的所有权可能需要很长时间，因为数据在栈上被复制来复制去。为了在这种情况下提高性能，我们可以将大量数据存储在堆上的一个盒指针中。然后，只有少量的指针数据在栈上被复制，而它所引用的数据则留在堆上的一个位置。第三种情况被称为「trait 对象」，「使用允许不同类型值的 trait 对象」将专门讨论这个主题。所以你在这里学到的知识将在该部分再次应用！
